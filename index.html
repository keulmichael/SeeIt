    
    <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1"/>
    <meta http-equiv="Content-type" content="text/html; class="gmail_default" style><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <title> Des moments Ã  partager avec SeeIt! </title>
    <script type="text/javascript">
    function Settings() {
        
        if ((typeof Camera !== "undefined")) {
            
            this.destinationType = Camera.DestinationType.FILE_URI; // cameraOptions: destinationType
            this.sourceType = Camera.PictureSourceType.PHOTOLIBRARY; // cameraOptions: sourceType
            this.mediaType = Camera.MediaType.PICTURE; // cameraOptions: mediaType
        }
        
        this.quality = 50; // cameraOptions: quality
        this.targetWidth = 300; // cameraOptions: targetWidth
        this.targetHeight = 300; // cameraOptions: targetHeight
        this.allowEdit = false; // cameraOptions: allowEdit
        this.correctOrientation = false;
        //this.cameraDirection = 0; 
        this.positionPaysage = false;
            
        this.encodingType = (typeof Camera !== "undefined") ? Camera.EncodingType.JPEG : 0; // cameraOptions: encodingType
        this.saveToPhotoAlbum = false; // cameraOptions: saveToPhotoAlbum
        
        this.popoverOptions = ((typeof Camera !== "undefined") && (typeof CameraPopoverOptions !== "undefined")) ? new CameraPopoverOptions(220, 600, 320, 480, Camera.PopoverArrowDirection.ARROW_DOWN) : null; // cameraOptions: popoverOptions
    }
    </script>
    
            <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
           <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
            <script type="text/javascript" src="js/jquery.mobile-1.1.1.min.js"></script>
            <script type="text/javascript" src="js/camera.js"></script>
    <script src="cordova.js"></script>
            
            <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css">
            <link rel="stylesheet" href="css/camera.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="dojox/mobile/themes/iphone/iphone.css"></link>
    <link href="dojox/mobile/themes/common/domButtons/DomButtonRedBadge.css" rel="stylesheet"/>
    <link href="dojox/mobile/themes/common/domButtons.css" rel="stylesheet"/>
    <script type="text/javascript" src="dojox/mobile/deviceTheme.js" data-dojo-config="mblThemeFiles: ['base','Button']"></script>
    <script type="text/javascript" src="dojox/mobile/deviceTheme.js" data-dojo-config="mblThemeFiles: ['base','IconContainer']"></script>
    <script type="text/javascript" src="dojox/mobile/deviceTheme.js" data-dojo-config="mblThemeFiles: ['base','Accordion']"></script>
    <script src="dojo/dojo.js"></script>
    
    <script type="text/javascript">
    require(["dojox/mobile/parser", "dojox/mobile/compat", "dojo/domReady!", "dojox/mobile/View", "dojox/mobile/Heading", "dojox/mobile/RoundRectList", "dojox/mobile/ListItem", "dojox/mobile/Switch", "dojox/mobile/RoundRect", "dojox/mobile/RoundRectCategory",  "dojox/mobile/ContentPane", "dojox/mobile/Button", "dojox/mobile/ProgressIndicator", "dojo/_base/xhr", "dojox/mobile/FilteredListMixin", "dojox/mobile/compat", "dojox/form/Uploader", "dojox/mobile/SwapView", "dojox/mobile/PageIndicator", "dojox/mobile/Badge", "dojox/mobile/IconContainer", "dojox/mobile/IconItem",   "dojox/mobile", "dojox/mobile/RoundRectDataList", "dojo/data/ItemFileReadStore", "dojox/mobile/TextBox", "dojox/mobile/ToggleButton", "dojox/mobile/TabBar", "dojox/mobile/ScrollableView","dojox/mobile/Accordion"
    ], function (parser) {
    parser.parse();	
    });
    dojoConfig = {
    async: true,
    parseOnLoad: false
    };
    
require(["dojo/request"], function(request){
request.get('http://www.appliseeit.com/mobile/texteTitreAccueil.html').then(function(resptitreAccueil){document.getElementById("titreAccueil").innerHTML=resptitreAccueil;})
request.get('http://www.appliseeit.com/mobile/texttexteAjouter.html').then(function(resptexteAjouter){document.getElementById("texteAjouter").innerHTML=resptexteAjouter;})
request.get('http://www.appliseeit.com/mobile/texteIntroInfos.html').then(function(respIntroInfos){document.getElementById("IntroInfos").innerHTML=respIntroInfos;})
request.get('http://www.appliseeit.com/mobile/texteAideInfos.html').then(function(respAideInfos){document.getElementById("AideInfos").innerHTML=respAideInfos;})
request.get('http://www.appliseeit.com/mobile/texteAvenirInfos.html').then(function(respAvenirInfos){document.getElementById("AvenirInfos").innerHTML=respAvenirInfos;})
request.get('http://www.appliseeit.com/mobile/textePourquoifaireInfos.html').then(function(respPourquoifaireInfos){document.getElementById("PourquoifaireInfos").innerHTML=respPourquoifaireInfos;})
request.get('http://www.appliseeit.com/mobile/texteNouscontacterInfos.html').then(function(respNouscontacterInfos){document.getElementById("NouscontacterInfos").innerHTML=respNouscontacterInfos;})
    });
    
    require([
    "dojo/_base/connect",
    "dojo/ready",
    ], function(connect, ready){
    ready(function(){
    AffichBadges();
    });
    })
    
    function AffichBadges(){
    require(["dojo/request",
    "dijit/registry",
    "dojox/mobile/IconItem",
    "dojox/mobile/IconContainer",
    "dojox/mobile/parser",
    "dojox/mobile",
    "dojox/mobile/compat",
    "dojox/mobile/ViewController"
    ], function(request, registry, IconItem, IconContainer, ViewController){
var iconContainerWidgetSuppr = document.getElementById("infoBadges");
while (iconContainerWidgetSuppr.firstChild) {
  iconContainerWidgetSuppr.removeChild(iconContainerWidgetSuppr.firstChild);
}
    request.get('http://www.appliseeit.com/mobile/badges.php').then(
    function(response){
    var iconContainerWidget = registry.byId("infoBadges");
    var res = response.split("_?_"); 
    for(var i= 0; i < res.length; i++)
    {var itemWidget ='';
    var resAff = res[i].split("_!_");  
    var itemWidget = new IconItem({
    icon: "http://www.appliseeit.com/mobile/camera.png",
    label: resAff[1],
    Badge: resAff[0], 
    moveTo:"#",
    onClick: function(e){
    affichPointsAlbum(this.label)
    }
    });
    iconContainerWidget.addChild(itemWidget);
    }
    })
    });
    }
    
    function SupprBadges(){
    require(["dojo/request",
    "dijit/registry"
    ], function(request, registry){
var iconContainerWidgetSuppr = document.getElementById("infoBadges");
while (iconContainerWidgetSuppr.firstChild) {
  iconContainerWidgetSuppr.removeChild(iconContainerWidgetSuppr.firstChild);
}
    })
    }
    
    var dataStoreTournees;
    require([
            "dojox/mobile/parser",
            "dojox/mobile",
            "dojox/mobile/compat", 
            "dojo/ready",
            "dijit/registry",
            "dojo/data/ItemFileReadStore",
            "dojox/mobile/ScrollableView",
            "dojox/mobile/EdgeToEdgeDataList",
            "dojox/mobile/FilteredListMixin"
            ], function(parser, mobile, compat, ready, registry,ItemFileReadStore, ScrollableView, EdgeToEdgeDataList, FilteredListMixin){
            dataStoreTournees = new ItemFileReadStore({url: 'http://www.appliseeit.com/mobile/tournees.php'});
    })
    
    var dataStoreAlbums;
    require([
            "dojox/mobile/parser",
            "dojox/mobile",
            "dojox/mobile/compat", 
            "dojo/ready",
            "dijit/registry",
            "dojo/data/ItemFileReadStore",
            "dojox/mobile/ScrollableView",
            "dojox/mobile/EdgeToEdgeDataList",
            "dojox/mobile/FilteredListMixin"
            ], function(parser, mobile, compat, ready, registry,ItemFileReadStore, ScrollableView, EdgeToEdgeDataList, FilteredListMixin){
            dataStoreAlbums = new ItemFileReadStore({url: 'http://www.appliseeit.com/mobile/album.php'});
    })
    
    function affichPointsAlbum(tournee){
    require([
        "dijit/registry",
        "dojox/mobile/ViewController",
        "dojox/mobile/parser",
        "dojox/mobile",
        "dojox/mobile/Button"
    ], function(registry, ViewController){
        var vca = ViewController.getInstance();
            vca.openExternalView({
                url:"http://www.appliseeit.com/mobile/affichPointsAlbums.php?tournee="+tournee,
                transition:"slide"
            }, registry.byId("affichPointsAlbums").containerNode);
        
    });
    }
    function affichPointsTournees(tournee){CacherCamera();
    require([
        "dijit/registry",
        "dojox/mobile/ViewController",
        "dojox/mobile/parser",
        "dojox/mobile",
        "dojox/mobile/Button"
    ], function(registry, ViewController){
        var vc = ViewController.getInstance();
            vc.openExternalView({
                url:"http://www.appliseeit.com/mobile/affichPointsTournees.php?tournee="+tournee,
                transition:"slide"
            }, registry.byId("affichPointsTournee").containerNode);
        
    });
    }
    function mobile_modif_donnees_reelle(num, tournee, page){
    require(["dojo/_base/window", "dojox/mobile/ProgressIndicator"],
    function(win, ProgressIndicator){
      var prog = new ProgressIndicator({size:40, center:true});
      win.body().appendChild(prog.domNode);
    prog.start();
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
    function onSuccess(position) {
    require(["dojo/dom", "dojo/on", "dojo/request", "dojo/query", "dojo/domReady!"],
    function(dom, on, request){
    var siteNum="site"+num;var site = document.getElementById(siteNum).value;
    var TypesNum="Types"+num;var types = document.getElementById(TypesNum).value;
    if (types!='FIN'){var quantite_reelleNum="quantite_reelle"+num;var quantite_reelle = document.getElementById(quantite_reelleNum).value;}
    var quantite_retoursNum="quantite_retours"+num; var quantite_retours= document.getElementById(quantite_retoursNum).value;
    varTNum="T"+num;var T = document.getElementById(varTNum).value;
    request.get('http://www.appliseeit.com/mobile/mobile_modif_donnees_reelle.php?num='+num+'&site='+site+'&Types='+types+'&nouvelle_quantite_reelle='+quantite_reelle+'&nouvelle_quantite_retours='+quantite_retours+'&PDA_Latitude='+position.coords.latitude+'&PDA_Longitude='+position.coords.longitude).then(
    function(response41){	affichPointsTournees(tournee,page);prog.stop();})
    });
    }
    });
    }
    function Aaccelerometer(){
    navigator.accelerometer.getCurrentAcceleration(accelerometerSuccess, accelerometerError);
    function accelerometerSuccess(acceleration) {
    if (acceleration.x>1 || acceleration.x<-1 && acceleration.y<9 && acceleration.z>1 || acceleration.z<-1 ){
        alert('Veuillez tenir l\'appareil correctement');
    }
    };
    function accelerometerError() {
        alert('onError!');
    };
    }
    function Ccompass(){
    navigator.compass.getCurrentHeading(compassSuccess, compassError);
    function onSuccess(heading) {
        alert('Heading: ' + heading.magneticHeading);
    };
    function onError(error) {
        alert('CompassError: ' + error.code);
    };
    navigator.compass.getCurrentHeading(onSuccess, onError);
    }
    function changeCameraDirection(value) {
    alert('Option disponible dans les prochaines versions');
    if (value=='on'){settings.CameraDirection=1;}
    else{settings.CameraDirection=0;}
    };
    function changeCorrectOrientation(value) {
    if (value=='on'){settings.correctOrientation=true;}
    else{settings.correctOrientation=false;}
    };
    function changePositionPaysage(value) {
    if (value=='on'){settings.positionPaysage=true;}
    else{settings.positionPaysage=false;}
    };
    function Voix(){
    if ('webkitSpeechRecognition' in window) {
    var recognition = new webkitSpeechRecognition();
    recognition.lang = "fr-FR";
    recognition.continuous = false;
    recognition.interimResults = true;
    recognition.start();
    recognition.onresult = function (event) {
    for (var i = event.resultIndex; i < event.results.length; ++i) {
    if (event.results[i].isFinal) {
    recognition.stop();
    var transcript = event.results[i][0].transcript;alert(transcript);
       
    var words = transcript.split(' ');
    var u = new SpeechSynthesisUtterance();
        u.text = response;
        u.lang = 'fr-FR';
     
        u.onend = function () {
            if (callback) {
                callback();
            }deom
        };
     
        u.onerror = function (e) {
            if (callback) {
                callback(e);
            }
        };
     
        speechSynthesis.speak(u);
    }}};}
    else{alert('La fonction Voix ne fonctionne pas sur ce navigateur');}
    }
    function CacherCamera(){
    document.getElementById("cadreCamera").style.display = "none";
    }
    function MontrerCamera(){
    document.getElementById('cadreCamera').style.display="inline";
   document.getElementById('cadreCamera').style.position="absolute";
    document.getElementById('cadreCamera').style.bottom="30px";

    }
    
    function creerAlbum(){
    require(["dojo/request","dojo/_base/window","dojox/mobile/ProgressIndicator"],
    function(request,win, ProgressIndicator){
    var album=document.getElementById('nouvelAlbum').value;
    var element=document.getElementById('nouvelElement').value;
    request.get('http://www.appliseeit.com/mobile/ajouter_point.php?album='+album+'&element='+element).then(
    function(response){
    document.getElementById('resultatCreerAlbum').innerHTML=response; 
    document.getElementById('afficherTourneeApresCreer').style.display="block";
    })
    })
    }
    </script>
    
    </head>
    <body onload="onLoadCamera();" style="visibility:hidden;">
    
    
    <div id='tabViewAccueil' data-dojo-type='dojox/mobile/ScrollableView' selected="true">
    <h1 data-dojo-type="dojox/mobile/Heading" data-dojo-props="fixed: 'top'">SeeIt !</h1>
    <br><br><img src="icone.png" width="150"><br><br>
    <div id='titreAccueil' align="center"></div><br><br>
    <ul data-dojo-type="dojox/mobile/RoundRectList">
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="icon:'screen.png', rightText:'Consulter', moveTo:'album'">Album</li>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="icon:'truck.png', rightText:'Prendre', moveTo:'tournees'">Photos</li>
    </ul>
    <br>
    <div id='problemeReseau' align="center"></div>
    </div>
    
    
    <div id="tournees" data-dojo-type="dojox/mobile/ScrollableView">
            <h1 data-dojo-type="dojox/mobile/Heading" data-dojo-props="fixed: 'top', back:'Accueil', moveTo:'tabViewAccueil'">Prendre les photos</h1>
            <ul id="listTournes" data-dojo-type="dojox/mobile/RoundRectDataList" data-dojo-mixins="dojox/mobile/FilteredListMixin" data-dojo-props="placeHolder: 'Search', store: dataStoreTournees"></ul>
    </div>
    
    
    <div id="album" data-dojo-type="dojox/mobile/ScrollableView">
            <h1 data-dojo-type="dojox/mobile/Heading" data-dojo-props="fixed: 'top', back:'Accueil', moveTo:'tabViewAccueil'">Albums</h1>
            <ul id="listAlbum" data-dojo-type="dojox/mobile/RoundRectDataList" data-dojo-mixins="dojox/mobile/FilteredListMixin" data-dojo-props="placeHolder: 'Search', store: dataStoreAlbums"></ul>
    </div>
    
    <div id="affichPointsAlbums" data-dojo-type="dojox/mobile/ScrollableView">
    </div>
    
    <div id="affichPointsTournee" data-dojo-type="dojox/mobile/ScrollableView">
    
    </div>
    
    
    <div id='tabViewOptions' data-dojo-type='dojox/mobile/ScrollableView' >
    <h1 data-dojo-type="dojox/mobile/Heading">Options</h1>
    <ul data-dojo-type="dojox/mobile/RoundRectList">
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="rightText:'Options'"></li>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Orientation auto
    <div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(newStateOrientation){changeCorrectOrientation(newStateOrientation)}" value="off"></div>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Blocage Position (Paysage)
    <div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(){alert('Option ÃÂ venir dans les prochaines versions');}" value="off"></div>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Blocage Camera (Paysage)
    <div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(newStatePosition){changePositionPaysage(newStatePosition)}" value="off"></div>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Camera Frontale
    <div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(newStateCameraDirection){changeCameraDirection(newStateCameraDirection)}" value="off"></div>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Zoom Grand Angle
    <div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(){alert('Option disponible dans les prochaines versions');}" value="off"></div>
    <li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Reconnaissance Vocale
    <div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(){Voix();}" value="off"></div>
    </li>
    </ul>
    </div>
    
    <div id="tabViewAlbum" data-dojo-type="dojox/mobile/ScrollableView" > 
    <h1 data-dojo-type="dojox/mobile/Heading">Albums</h1>
    <ul id="infoBadges" data-dojo-type="dojox/mobile/IconContainer"></ul>
    </div>
    
    <div id="tabViewAjouter" data-dojo-type="dojox/mobile/ScrollableView" > 
    <h1 data-dojo-type="dojox/mobile/Heading">Ajouter</h1>
    <div id="texteAjouter" align="center"></div><br><br>
    <font color='grey' size='3'>Album</font><input type="text" id="nouvelAlbum">
    <font color='grey' size='3'>Objectif</font><input type="text" id="nouvelElement">
    
    <button onclick='creerAlbum()'>Ajouter</button>
    <br>
    <div id="resultatCreerAlbum"></div><br><br>
    <div id='afficherTourneeApresCreer' style='display:none'><button onclick='affichPointsTournees(document.getElementById("nouvelAlbum").value);'>Afficher</button></div>
    </div>
    
    <div id="tabViewUpdates" data-dojo-type="dojox/mobile/ScrollableView" > 
    <h1 data-dojo-type="dojox/mobile/Heading">Infos</h1>
    <ul id="intro" data-dojo-type="dojox/mobile/RoundRectList">
<div id='IntroInfos' align='center'></div>
    </ul>
    <div data-dojo-type="dojox/mobile/Accordion" >
        <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"Aide"'>   
	<div id='AideInfos' align='left'></div>
        </div>
        <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"A venir"'>
	<div id='AvenirInfos' align='left'></div>
   </div>
        <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"Pourquoi faire ?"'>
	<div id='PourquoifaireInfos' align='left'></div>
    </div>
        <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"Nous contacter ?"' id='NouscontacterInfos'>
	<div  align='left'></div>
    </div>
     </div>
    </div>
    
    <div id='cadreCamera' style="display:none">
    <div data-role="content" id="cadreCamera" >
    <a href="#" data-role="button" id="open_camera_button" align="center">Prendre une photo</a>
    </div>
    
    <div data-role="content">
    <img id="pic" src="" style="display: none;"/>
    </div>
    </div>
    
    
    <ul id="demoTabBar" data-dojo-type="dojox/mobile/TabBar" data-dojo-props='iconBase:"http://www.distriweb.mobi/mgp/paris/mobile/tab-icons.png",fixed:"bottom"'>	
    <li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,0,29,29", iconPos2:"29,0,29,29", moveTo:"tabViewAccueil", selected:true, onClick:function(){CacherCamera()}'>Accueil</li>
    <li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,87,29,29", iconPos2:"29,87,29,29", moveTo:"tabViewAlbum", onClick:function(){CacherCamera();AffichBadges()}'>Today</li>
    <li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,58,29,29", iconPos2:"29,58,29,29", moveTo:"tabViewAjouter", onClick:function(){CacherCamera()}'>Ajouter</li>
    <li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,29,29,29", iconPos2:"29,29,29,29", moveTo:"tabViewOptions", onClick:function(){CacherCamera()}'>Options</li>
    <li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,116,29,29", iconPos2:"29,116,29,29", moveTo:"tabViewUpdates", onClick:function(){CacherCamera()}'>Infos</li>
    </ul>
    </body>
    </html>
