<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<title> Des moments à partager avec SeeIt! </title>

<script type="text/javascript">
function Settings() {
    
    if ((typeof Camera !== "undefined")) {
        
        this.destinationType = Camera.DestinationType.FILE_URI; // cameraOptions: destinationType
        this.sourceType = Camera.PictureSourceType.PHOTOLIBRARY; // cameraOptions: sourceType
        this.mediaType = Camera.MediaType.PICTURE; // cameraOptions: mediaType
    }
    
    this.quality = 50; // cameraOptions: quality
    this.targetWidth = 300; // cameraOptions: targetWidth
    this.targetHeight = 300; // cameraOptions: targetHeight
    this.allowEdit = false; // cameraOptions: allowEdit
    this.correctOrientation = false;
    //this.cameraDirection = 0; 
    this.positionPaysage = false;
        
    this.encodingType = (typeof Camera !== "undefined") ? Camera.EncodingType.JPEG : 0; // cameraOptions: encodingType
    this.saveToPhotoAlbum = false; // cameraOptions: saveToPhotoAlbum
    
    this.popoverOptions = ((typeof Camera !== "undefined") && (typeof CameraPopoverOptions !== "undefined")) ? new CameraPopoverOptions(220, 600, 320, 480, Camera.PopoverArrowDirection.ARROW_DOWN) : null; // cameraOptions: popoverOptions

}
</script>

        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
	        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" src="js/camera.js"></script>
	<script src="cordova.js"></script>
        
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css">
        <link rel="stylesheet" href="css/camera.css" type="text/css">
	
	
<link rel="stylesheet" type="text/css" href="dojox/mobile/themes/iphone/iphone.css"></link>
<link href="dojox/mobile/themes/common/domButtons/DomButtonRedBadge.css" rel="stylesheet"/>
<link href="dojox/mobile/themes/common/domButtons.css" rel="stylesheet"/>
<script type="text/javascript" src="dojox/mobile/deviceTheme.js" data-dojo-config="mblThemeFiles: ['base','Button']"></script>
<script type="text/javascript" src="dojox/mobile/deviceTheme.js" data-dojo-config="mblThemeFiles: ['base','IconContainer']"></script>
<script type="text/javascript" src="dojox/mobile/deviceTheme.js" data-dojo-config="mblThemeFiles: ['base','Accordion']"></script>
<script src="dojo/dojo.js"></script>

<script type="text/javascript">
		require(["dojox/mobile/parser", "dojox/mobile/compat", "dojo/domReady!", "dojox/mobile/View", "dojox/mobile/Heading", "dojox/mobile/RoundRectList", "dojox/mobile/ListItem", "dojox/mobile/Switch", "dojox/mobile/RoundRect", "dojox/mobile/RoundRectCategory",  "dojox/mobile/ContentPane", "dojox/mobile/Button", "dojox/mobile/ProgressIndicator", "dojo/_base/xhr", "dojox/mobile/FilteredListMixin", "dojox/mobile/compat", "dojox/form/Uploader", "dojox/mobile/SwapView", "dojox/mobile/PageIndicator", "dojox/mobile/Badge", "dojox/mobile/IconContainer", "dojox/mobile/IconItem",   "dojox/mobile", "dojox/mobile/RoundRectDataList", "dojo/data/ItemFileReadStore", "dojox/mobile/TextBox", "dojox/mobile/ToggleButton", "dojox/mobile/TabBar", "dojox/mobile/ScrollableView","dojox/mobile/Accordion"
		], function (parser) {
			parser.parse();		
			
		});
		
dojoConfig = {
async: true,
parseOnLoad: false
};


require([
"dojo/_base/connect",
"dojo/ready",
"dijit/registry",
"dojox/mobile/IconItem",
"dojox/mobile/IconContainer",
"dojox/mobile/ListItem",
"dojox/mobile/Button",
"dojox/mobile/parser",
"dojox/mobile",
"dojox/mobile/compat",
"dojox/mobile/ViewController",
], function(connect, ready, registry, IconItem, IconContainer, ListItem,ViewController){
ready(function(){
require(["dojo/request"],
function(request){
request.get('http://www.appliseeit/mobile/badges.php').then(
function(response){
var iconContainerWidget = registry.byId("infoBadges");
var res = response.split("_?_"); 
for(var i= 0; i < res.length; i++)
{var itemWidget ='';
var resAff = res[i].split("_!_");  
var itemWidget = new IconItem({
icon: "http://www.appliseeit/mobile/camera.png",
label: resAff[1],
Badge: resAff[0], 
moveTo:"#",
onClick: function(e){
affichPointsTournees(this.label,'album')
}
});
iconContainerWidget.addChild(itemWidget);
}
})
});
});
})


var dataStoreTournees;
require([
        "dojox/mobile/parser",
        "dojox/mobile",
        "dojox/mobile/compat", 
        "dojo/ready",
        "dijit/registry",
        "dojo/data/ItemFileReadStore",
        "dojox/mobile/ScrollableView",
        "dojox/mobile/EdgeToEdgeDataList",
        "dojox/mobile/FilteredListMixin"
        ], function(parser, mobile, compat, ready, registry,ItemFileReadStore, ScrollableView, EdgeToEdgeDataList, FilteredListMixin){

        dataStoreTournees = new ItemFileReadStore({url: 'http://www.appliseeit/mobile/tournees.php'});

})


var dataStoreAlbums;
require([
        "dojox/mobile/parser",
        "dojox/mobile",
        "dojox/mobile/compat", 
        "dojo/ready",
        "dijit/registry",
        "dojo/data/ItemFileReadStore",
        "dojox/mobile/ScrollableView",
        "dojox/mobile/EdgeToEdgeDataList",
        "dojox/mobile/FilteredListMixin"
        ], function(parser, mobile, compat, ready, registry,ItemFileReadStore, ScrollableView, EdgeToEdgeDataList, FilteredListMixin){

        dataStoreAlbums = new ItemFileReadStore({url: 'http://www.appliseeit/mobile/album.php'});

})





function affichPointsTournees(tournee,type){
require([
    "dijit/registry",
    "dojox/mobile/ViewController",
    "dojox/mobile/parser",
    "dojox/mobile",
    "dojox/mobile/Button"
], function(registry, ViewController){
    var vc = ViewController.getInstance();
        vc.openExternalView({
            url:"http://www.appliseeit/mobile/affichPointsTournees.php?tournee="+tournee+"&type="+type,
            transition:"slide"
        }, registry.byId("affichPointsTournee").containerNode);
    
});

}


function mobile_modif_donnees_reelle(edition, num, tournee, page){

require(["dojo/_base/window", "dojox/mobile/ProgressIndicator"],
function(win, ProgressIndicator){

  var prog = new ProgressIndicator({size:40, center:true});
  win.body().appendChild(prog.domNode);
prog.start();

navigator.geolocation.getCurrentPosition(onSuccess, onError);
function onSuccess(position) {

require(["dojo/dom", "dojo/on", "dojo/request", "dojo/query", "dojo/domReady!"],
function(dom, on, request){

var siteNum="site"+num;var site = document.getElementById(siteNum).value;
var TypesNum="Types"+num;var types = document.getElementById(TypesNum).value;
if (types!='FIN'){var quantite_reelleNum="quantite_reelle"+num;var quantite_reelle = document.getElementById(quantite_reelleNum).value;}
var quantite_retoursNum="quantite_retours"+num; var quantite_retours= document.getElementById(quantite_retoursNum).value;
varTNum="T"+num;var T = document.getElementById(varTNum).value;

request.get('http://www.appliseeit/mobile/mobile_modif_donnees_reelle.php?edition='+edition+'&num='+num+'&site='+site+'&Types='+types+'&nouvelle_quantite_reelle='+quantite_reelle+'&nouvelle_quantite_retours='+quantite_retours+'&PDA_Latitude='+position.coords.latitude+'&PDA_Longitude='+position.coords.longitude).then(
function(response41){	affichPointsTournees(tournee,page);prog.stop();})
});
}

});
}

function Aaccelerometer(){
navigator.accelerometer.getCurrentAcceleration(accelerometerSuccess, accelerometerError);

function accelerometerSuccess(acceleration) {
if (acceleration.x>1 || acceleration.x<-1 && acceleration.y<9 && acceleration.z>1 || acceleration.z<-1 ){
    alert('Veuillez tenir l\'appareil correctement');
}
};

function accelerometerError() {
    alert('onError!');
};
}

function Ccompass(){
navigator.compass.getCurrentHeading(compassSuccess, compassError);
function onSuccess(heading) {
    alert('Heading: ' + heading.magneticHeading);
};

function onError(error) {
    alert('CompassError: ' + error.code);
};

navigator.compass.getCurrentHeading(onSuccess, onError);
}

function changeCameraDirection(value) {
alert('Option Ã  venir dans les prochaines versions');
if (value=='on'){settings.CameraDirection=1;}
else{settings.CameraDirection=0;}
};

function changeCorrectOrientation(value) {
if (value=='on'){settings.correctOrientation=true;}
else{settings.correctOrientation=false;}
};

function changePositionPaysage(value) {
if (value=='on'){settings.positionPaysage=true;}
else{settings.positionPaysage=false;}
};

function Voix(){
if ('webkitSpeechRecognition' in window) {
var recognition = new webkitSpeechRecognition();
recognition.lang = "fr-FR";
recognition.continuous = false;
recognition.interimResults = true;
recognition.start();
		
recognition.onresult = function (event) {
for (var i = event.resultIndex; i < event.results.length; ++i) {
if (event.results[i].isFinal) {
recognition.stop();
var transcript = event.results[i][0].transcript;alert(transcript);
			    
var words = transcript.split(' ');


	
var u = new SpeechSynthesisUtterance();
    u.text = response;
    u.lang = 'fr-FR';
 
    u.onend = function () {
        if (callback) {
            callback();
        }deom
    };
 
    u.onerror = function (e) {
        if (callback) {
            callback(e);
        }
    };
 
    speechSynthesis.speak(u);
}}};}
else{alert('La fonction Voix ne fonctionne pas sur ce navigateur');}
}

</script>

</head>
<body onload="onLoadCamera();" style="visibility:hidden;">


<div id='tabViewAccueil' data-dojo-type='dojox/mobile/ScrollableView' selected="true">
<h1 data-dojo-type="dojox/mobile/Heading" data-dojo-props="fixed: 'top'">Des moments à partager - SeeIt !</h1>
<img src="icone.png">
<ul id="intro" data-dojo-type="dojox/mobile/RoundRectList">
<font color='grey' size='2'><b>Partagez des moments et découvrez ceux du monde entier en directe d'une façon innovante car comme dans la vie réelle, les moments disparaissent avec SeeIt ! Soyez donc à  l'affût des nouvelles photos en consultant les albums et en recevant les alertes !<br>Les photos ne sont pas sauvegardées dans votre téléphone. Vous n'avez donc pas à  vous inquiéter pour le stockage ! Les photos sont automatiquement supprimées des albums chaque jour afin de pouvoir en réaliser des nouvelles.</b></font>
</ul>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="rightText:'Accès'"></li>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="icon:'screen.png', rightText:'Sélectionner', moveTo:'album'">Album</li>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="icon:'truck.png', rightText:'Sélectionner', moveTo:'tournees'">Thèmes</li>

<br>

</div>


<div id="tournees" data-dojo-type="dojox/mobile/ScrollableView">
        <h1 data-dojo-type="dojox/mobile/Heading" data-dojo-props="fixed: 'top', back:'Accueil', moveTo:'tabViewAccueil'">Thèmes</h1>
        <ul id="listTournes" data-dojo-type="dojox/mobile/RoundRectDataList" data-dojo-mixins="dojox/mobile/FilteredListMixin" data-dojo-props="placeHolder: 'Search', store: dataStoreTournees"></ul>
</div>


<div id="album" data-dojo-type="dojox/mobile/ScrollableView">
        <h1 data-dojo-type="dojox/mobile/Heading" data-dojo-props="fixed: 'top', back:'Accueil', moveTo:'tabViewAccueil'">Albums</h1>
        <ul id="listAlbum" data-dojo-type="dojox/mobile/RoundRectDataList" data-dojo-mixins="dojox/mobile/FilteredListMixin" data-dojo-props="placeHolder: 'Search', store: dataStoreAlbums"></ul>
</div>


<div id="affichPointsTournee" data-dojo-type="dojox/mobile/View">
<!-- 
<div data-role="content">
<a href="#" data-role="button" id="open_camera_button">Prendre une photo</a>
</div>

<div data-role="content">
<img id="pic" src="" style="display: none; border: 2px black;"/>
</div>
<div id='total'></div> 
--> 
</div>


<div id='tabViewOptions' data-dojo-type='dojox/mobile/ScrollableView' >
<h1 data-dojo-type="dojox/mobile/Heading">Options</h1>
<ul data-dojo-type="dojox/mobile/RoundRectList">
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="rightText:'Options'"></li>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Orientation auto
<div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(newStateOrientation){changeCorrectOrientation(newStateOrientation)}" value="off"></div>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Position Paysage
<div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(newStatePosition){changePositionPaysage(newStatePosition)}" value="off"></div>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Camera Frontale
<div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(newStateCameraDirection){changeCameraDirection(newStateCameraDirection)}" value="off"></div>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Zoom Grand Angle
<div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(){alert('Option à venir dans les prochaines versions');}" value="off"></div>
<li data-dojo-type="dojox/mobile/ListItem" data-dojo-props="">Reconnaissance Vocale
<div data-dojo-type="dojox/mobile/Switch" data-dojo-props="onStateChanged:function(){Voix();}" value="off"></div>
</li>
</ul>
</div>

<div id="tabViewAlbum" data-dojo-type="dojox/mobile/ScrollableView" > 
<h1 data-dojo-type="dojox/mobile/Heading">Albums</h1>
<ul id="infoBadges" data-dojo-type="dojox/mobile/IconContainer"></ul>
</div>

<div id="tabViewTop" data-dojo-type="dojox/mobile/ScrollableView" > 
<h1 data-dojo-type="dojox/mobile/Heading">Top Photos</h1>
</div>

<div id="tabViewUpdates" data-dojo-type="dojox/mobile/ScrollableView" > 
<h1 data-dojo-type="dojox/mobile/Heading">Infos</h1>

<div data-dojo-type="dojox/mobile/Accordion" >
    <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"Aide"'>   
<font color='black' size='2'>> Ouvrez un <b>Thème</b> existant pour prendre une photo. Dans la prochaine version vous pourrez créer vos propres thèmes : prenez donc d'abord une photo et indiquez un nom d'album si le celui-ci n'existe pas.<br>
> Cliquez sur <b>Album</b> pour découvrir toutes les photos.<br>
> Cliquez sur <b>Today</b> pour découvrir les photos du jour.<br>
> Cliquez sur <b>Top</b> pour voir les photos les plus populaires (disponible dans les prochaines versions).<br>
> Cliquer sur <b>Options</b> pour activer l'aide à la prise de photo au mode souhaité, pour configurez les alertes vous être averti des nouvelles photos : messages, vocales, vibrations, sonneries (disponible dans les prochaines versions)<br></font>
</div>
    <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"A venir"'>
<font color='black' size='2'>Camera Frontable<br>Zomme Grand Angle<br>Reconnaissance Vocale<br>Consultation des album en Privé<br>Abonnement à  un album<br>Vidéo </font>
</div>
    <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"Pourquoi faire ?"'>
<font color='black' size='2'>Partager un événement, une scène insolite, un monument, une exposition<br>Jouer au reporter<br>Communiquer des problèmes de transport<br>Avertir lorsqu'une place de parking est libre<br>Montrer un lieu de rdv</font>
</div>
    <div data-dojo-type="dojox/mobile/ContentPane" data-dojo-props='label:"Les auteurs"'>
<font color='black' size='2'></font>
</div>
 </div>
</div>




	<ul id="demoTabBar" data-dojo-type="dojox/mobile/TabBar" data-dojo-props='iconBase:"http://www.distriweb.mobi/mgp/paris/mobile/tab-icons.png",fixed:"bottom"'>		
		<li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,0,29,29", iconPos2:"29,0,29,29", moveTo:"tabViewAccueil", selected:true'>Accueil</li>
		<li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,87,29,29", iconPos2:"29,87,29,29", moveTo:"tabViewAlbum"'>Today</li>
		<li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,58,29,29", iconPos2:"29,58,29,29", moveTo:"tabViewTop"'>Top</li>
		<li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,29,29,29", iconPos2:"29,29,29,29", moveTo:"tabViewOptions"'>Options</li>
		<li data-dojo-type="dojox/mobile/TabBarButton" data-dojo-props='iconPos1:"0,116,29,29", iconPos2:"29,116,29,29", moveTo:"tabViewUpdates"'>Infos</li>
	</ul>
	
	
</body>
</html>
